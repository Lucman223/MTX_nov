<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MotoTX - Pr√©sentation Ma√Ætresse D√©finitive</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <!-- PrismJS pour le surlignage de code -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #059669;
            --accent: #facc15;
            --dark-bg: #0f172a;
            --panel-bg: #1e293b;
            --code-bg: #011627;
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
            --transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        body {
            font-family: 'Outfit', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--dark-bg);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* Layout Principal */
        .master-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        /* Panneau de Diapositives (Gauche) */
        .content-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 40px;
            position: relative;
            z-index: 10;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1e1b4b 100%);
            overflow-y: auto;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            transition: flex 0.4s ease;
        }

        /* Panneau de Code (Droite) */
        .code-panel {
            flex: 0;
            background-color: var(--code-bg);
            display: flex;
            flex-direction: column;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
            transition: flex 0.4s ease, opacity 0.4s ease;
            overflow: hidden;
            opacity: 0;
            width: 0;
            /* Fallback */
        }

        .code-panel.active {
            flex: 0.8;
            opacity: 1;
            width: auto;
        }

        .code-header {
            padding: 12px 24px;
            background-color: #010e1a;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent);
            min-height: 50px;
        }

        .code-content {
            flex: 1;
            overflow: auto;
            margin: 0;
            font-size: 14px;
            position: relative;
        }

        /* Correction critique d'affichage */
        .code-content pre,
        .code-content code {
            white-space: pre !important;
            overflow-x: auto !important;
            font-family: 'JetBrains Mono', monospace !important;
            tab-size: 4;
        }

        /* Blocs de Diapositive */
        .slide {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            height: 100%;
            animation: slideIn 0.6s var(--transition);
        }

        .slide.active {
            display: flex;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Typographie et Style */
        h1 {
            font-size: 4rem;
            font-weight: 800;
            margin: 0;
            line-height: 1.1;
            background: linear-gradient(to right, #60a5fa, #34d399);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 2.5rem;
            color: var(--accent);
            margin: 0 0 10px 0;
        }

        h3 {
            font-size: 1.6rem;
            color: var(--text-main);
            margin: 0 0 15px 0;
            border-left: 4px solid var(--primary);
            padding-left: 15px;
        }

        p {
            font-size: 1.1rem;
            color: var(--text-dim);
            line-height: 1.6;
            max-width: 650px;
        }

        .badge-tech {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(37, 99, 235, 0.2);
            color: #93c5fd;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
            border: 1px solid rgba(37, 99, 235, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .img-container {
            width: 100%;
            max-width: 650px;
            margin-top: 25px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .img-container img {
            width: 100%;
            display: block;
        }

        /* Navigation */
        .nav-controls {
            position: absolute;
            bottom: 30px;
            left: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(15, 23, 42, 0.8);
            padding: 8px 20px;
            border-radius: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-main);
            font-size: 1.3rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
        }

        .nav-btn:hover {
            color: var(--primary);
            transform: scale(1.2);
        }

        .nav-btn:disabled {
            color: #444;
            cursor: not-allowed;
        }

        .slide-indicator {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-dim);
            min-width: 60px;
            text-align: center;
        }

        .code-toggle {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .code-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(37, 99, 235, 0.3);
        }

        /* COMPOSANTS AVANC√âS */
        .grid-tech {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            width: 100%;
            margin-top: 15px;
        }

        .tech-card {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 12px;
            border-top: 3px solid var(--primary);
            transition: var(--transition);
        }

        .tech-card h4 {
            margin: 0 0 8px 0;
            color: var(--accent);
            font-size: 1rem;
        }

        .tech-card ul {
            margin: 0;
            padding-left: 15px;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .file-tree {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.8rem;
            line-height: 1.4;
            width: 100%;
            border-left: 4px solid var(--secondary);
            margin: 15px 0;
        }

        .tree-folder {
            color: #facc15;
            font-weight: 600;
        }

        .tree-file {
            color: #94a3b8;
        }

        .tree-comment {
            color: #64748b;
            font-style: italic;
            margin-left: 10px;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin: 20px 0;
            width: 100%;
        }

        .flow-node {
            background: var(--panel-bg);
            padding: 10px 18px;
            border-radius: 50px;
            border: 1px solid var(--primary);
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .flow-arrow {
            color: var(--text-dim);
            font-weight: bold;
        }

        .explanation-box {
            background: rgba(37, 99, 235, 0.08);
            border-left: 4px solid var(--primary);
            padding: 15px;
            border-radius: 0 10px 10px 0;
            margin-top: 20px;
            font-size: 0.95rem;
            color: #d1d5db;
        }

        .section-divider {
            width: 80px;
            height: 4px;
            background: var(--accent);
            margin: 20px 0;
            border-radius: 2px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            margin-top: 15px;
        }

        .gallery-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 160px;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .gallery-item:hover img {
            transform: scale(1.05);
        }

        .gallery-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.85));
            padding: 8px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* LIGHTBOX SYSTEM */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            cursor: zoom-out;
            animation: fadeIn 0.3s ease;
        }

        .lightbox-overlay.active {
            display: flex;
        }

        .lightbox-img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        pre[class*="language-"] {
            margin: 0 !important;
            border-radius: 0 !important;
            background: transparent !important;
        }

        /* LIGHTBOX / MODAL ZOOM */
        .lightbox-modal {
            display: none;
            position: fixed;
            z-index: 9999;
            padding-top: 50px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .lightbox-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 1200px;
            max-height: 90vh;
            object-fit: contain;
            animation-name: zoom;
            animation-duration: 0.3s;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        @keyframes zoom {
            from {
                transform: scale(0.1)
            }

            to {
                transform: scale(1)
            }
        }

        .close-lightbox {
            position: absolute;
            top: 25px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }

        .close-lightbox:hover,
        .close-lightbox:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        /* Cursor pointer for zoomable images */
        .tech-card img {
            cursor: zoom-in;
            transition: transform 0.2s;
        }

        .tech-card img:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>

    <div class="master-container">

        <!-- PANNEAU DE CONTENU -->
        <div class="content-panel">

            <!-- SECTION 1: INTRODUCTION ET VISION -->
            <div class="slide active" data-code="">
                <div class="badge-tech">URBAN MOBILITY MALI</div>
                <h1>MotoTX</h1>
                <h3>La R√©volution du Transport √† Bamako</h3>
                <div class="section-divider"></div>
                <p>MotoTX n'est pas seulement une application ; c'est une <strong>infrastructure num√©rique</strong>
                    con√ßue pour professionnaliser le secteur du transport informel au Mali.</p>
                <div class="img-container">
                    <img src="general_home.png" alt="MotoTX Mockup" class="zoomable">
                </div>
            </div>

            <div class="slide" data-code="">
                <h2>La Mission</h2>
                <h3>Digitalisation avec Impact Social</h3>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>S√©curit√© 100%</h4>
                        <ul>
                            <li>Identification KYC des motoristes.</li>
                            <li>Tra√ßabilit√© GPS en temps r√©el.</li>
                            <li>Bouton panique int√©gr√©.</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h4>√âconomie Num√©rique</h4>
                        <ul>
                            <li>Int√©gration Orange Money Mali.</li>
                            <li>Syst√®me de Forfaits pr√©pay√©s.</li>
                            <li>Portefeuilles num√©riques s√©curis√©s.</li>
                        </ul>
                    </div>
                </div>
                <div class="explanation-box">
                    <strong>Contexte :</strong> Bamako d√©pend des motos pour 80% de ses d√©placements. MotoTX apporte
                    ordre, s√©curit√© et modernit√© √† cet √©cosyst√®me.
                </div>
            </div>

            <!-- SECTION 2: ARCHITECTURE GLOBALE -->
            <div class="slide" data-code="code-arch-global">
                <div class="badge-tech">SYSTEM DESIGN</div>
                <h2>Architecture du Syst√®me</h2>
                <h3>Monolithe Moderne avec UI Atomique</h3>
                <p>Nous utilisons une approche de <strong>Monolithe Moderne</strong> : backend robuste en Laravel
                    int√©gr√© avec une architecture <strong>Frontend Atomique</strong> en React.</p>
                <div class="file-tree">
                    <span class="tree-folder">/backend</span> <span class="tree-comment">// Noyau de la
                        plateforme</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">app/</span> <span class="tree-comment">// Logique M√©tier
                        et Services</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">resources/js/</span> <span class="tree-comment">// ‚öõÔ∏è UI
                        bas√©e sur Atomes/Mol√©cules</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">routes/api/</span> <span class="tree-comment">// Endpoints
                        RESTful Prot√©g√©s</span><br>
                    &nbsp;&nbsp;‚îî‚îÄ‚îÄ <span class="tree-file">vite.config.js</span> <span class="tree-comment">// Moteur
                        de build ultra-rapide</span>
                </div>
                <div class="explanation-box">
                    <strong>√âvolution :</strong> Nous avons migr√© de vues rigides vers un √©cosyst√®me de composants
                    d√©coupl√©s, tout en conservant la simplicit√© op√©rationnelle d'un monorepo contr√¥l√© par Vite.
                </div>
            </div>

            <div class="slide" data-code="code-frontend-structure">
                <div class="badge-tech">FRONTEND ECOSYSTEM</div>
                <h2>Structure Frontend</h2>
                <h3>Organisation Atomique et √âvolutive</h3>
                <p>Situ√© dans <code>/backend/resources/js/</code>, notre frontend suit un standard d'organisation de
                    haut niveau.</p>
                <div class="file-tree">
                    <span class="tree-folder">/js</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">components/</span> <span class="tree-comment">// Atomes,
                        Mol√©cules et Organismes</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">context/</span> <span class="tree-comment">// Gestion
                        d'√âtat Global (Auth)</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">hooks/</span> <span class="tree-comment">// Logique
                        R√©utilisable (Geoloc, Notifs)</span><br>
                    &nbsp;&nbsp;‚îú‚îÄ‚îÄ <span class="tree-folder">pages/</span> <span class="tree-comment">// Vues par R√¥les
                        (Client, Motoriste, Admin)</span><br>
                    &nbsp;&nbsp;‚îî‚îÄ‚îÄ <span class="tree-file">App.jsx</span> <span class="tree-comment">// Orchestrateur
                        de Routes Prot√©g√©es</span>
                </div>
                <div class="explanation-box">
                    Cette structure permet au frontend de cro√Ætre de mani√®re modulaire, permettant √† plusieurs
                    d√©veloppeurs de travailler sur diff√©rents r√¥les sans conflits d'architecture.
                </div>
            </div>

            <!-- SECTION 3: BACKEND DEEP DIVE -->
            <div class="slide" data-code="code-service-layer">
                <div class="badge-tech">BACKEND MASTERY</div>
                <h2>Patron "Service Layer"</h2>
                <h3>S√©paration des Responsabilit√©s</h3>
                <p>Nos contr√¥leurs sont "minces" ; la vraie logique m√©tier r√©side dans des Services purs.</p>
                <div class="flow-diagram">
                    <div class="flow-node">Request (JSON)</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Controller</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node" style="border-color: var(--secondary);">Service Layer</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Eloquent Models</div>
                </div>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Maintenabilit√©</h4>
                        <p>Les changements de r√®gles m√©tier affectent uniquement le Service, pas l'API.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Transactions</h4>
                        <p>Utilisation de <code>DB::transaction</code> pour assurer l'atomicit√© des paiements.</p>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-api-rest">
                <div class="badge-tech">BACKEND MASTERY</div>
                <h2>Excellence API REST</h2>
                <h3>Coh√©rence et Typage</h3>
                <p>Toute la communication entre React et Laravel suit un standard strict de r√©ponses JSON.</p>
                <div class="file-tree">
                    {<br>
                    &nbsp;&nbsp;"status": "success",<br>
                    &nbsp;&nbsp;"data": { ... },<br>
                    &nbsp;&nbsp;"message": "Op√©ration termin√©e"<br>
                    }
                </div>
                <div class="explanation-box">
                    Nous utilisons des codes HTTP s√©mantiques (201 Created, 403 Forbidden, 422 Unprocessable Content)
                    pour une int√©gration robuste.
                </div>
            </div>

            <div class="slide" data-code="code-auth">
                <div class="badge-tech">SECURITY</div>
                <h2>S√©curit√© & JWT</h2>
                <h3>Authentification Stateless</h3>
                <p>Impl√©mentation de <strong>JSON Web Tokens</strong> pour une communication s√©curis√©e et scalable entre
                    UI et Serveur.</p>
                <div class="flow-diagram">
                    <div class="flow-node">Login</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node" style="border-color: #facc15;">Server (Tymon JWT)</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Access Token (HS256)</div>
                </div>
                <div class="explanation-box">
                    - Middleware <code>jwt.auth</code> prot√®ge toutes les routes client et motoriste.<br>
                    - Le token voyage dans le Header <code>Authorization: Bearer</code>.<br>
                    - Nous √©liminons l'√©tat de session sur le serveur pour une meilleure performance.
                </div>
            </div>

            <div class="slide" data-code="code-frontend-routes">
                <div class="badge-tech">SECURITY</div>
                <h2>Contr√¥le d'Acc√®s (RBAC)</h2>
                <h3>Routes Prot√©g√©es dans l'UI</h3>
                <p>Le client ne peut jamais voir le panneau d'administration, et le motoriste acc√®de uniquement √† son
                    terminal de travail.</p>
                <div class="file-tree">
                    &lt;ProtectedRoute role="admin"&gt;<br>
                    &nbsp;&nbsp;&lt;AdminDashboard /&gt;<br>
                    &lt;/ProtectedRoute&gt;
                </div>
                <div class="explanation-box">
                    Notre UI est intelligente : elle valide les "claims" du token avant de rendre les composants
                    critiques, doublant la s√©curit√© du backend.
                </div>
            </div>

            <!-- SECTION 4: BASE DE DONN√âES -->
            <div class="slide" data-code="code-db-models">
                <div class="badge-tech">DATABASE DESIGN</div>
                <h2>Mod√®le de Donn√©es</h2>
                <h3>Int√©grit√© Relationnelle</h3>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Voyages (Trips)</h4>
                        <ul>
                            <li>Relation <code>User-Client</code>.</li>
                            <li>Relation <code>User-Driver</code>.</li>
                            <li>√âtats : Demand√©, Accept√©, Termin√©.</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h4>√âconomie</h4>
                        <ul>
                            <li>Table <code>Forfaits</code> li√©e aux cr√©dits.</li>
                            <li>Historique de paiements immuable.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-algorithm">
                <div class="badge-tech">BUSINESS LOGIC</div>
                <h2>Algorithme de Tarification</h2>
                <h3>Gouvernance des Prix</h3>
                <p>Syst√®me dynamique de calcul des co√ªts bas√© sur la politique de Forfaits pr√©pay√©s.</p>
                <div class="flow-diagram">
                    <div class="flow-node">Demande</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node" style="border-color: #facc15;">Valider Solde</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">D√©biter "Usage"</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Confirmer</div>
                </div>
                <div class="explanation-box">
                    Le syst√®me assure qu'aucun voyage ne commence sans une transaction atomique pr√©alable, prot√©geant
                    les revenus du motoriste.
                </div>
            </div>

            <!-- SECTION 5: FRONTEND MASTERY -->
            <div class="slide" data-code="code-design-system">
                <div class="badge-tech">FRONTEND EXCELLENCE</div>
                <h2>Syst√®me de Design Atomique</h2>
                <h3>De Styles Inline √† Composants R√©utilisables</h3>
                <p>Nous avons √©volu√© d'une structure monolithique visuelle vers un <strong>Syst√®me Atomique</strong>
                    bas√© sur des composants ind√©pendants.</p>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Atomes et Mol√©cules</h4>
                        <p>Composants <code>Card</code>, <code>Button</code> et <code>Badge</code> qui encapsulent
                            logique et style.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Coh√©rence Globale</h4>
                        <p>Un changement dans l'atome de couleur primaire impacte positivement toute la plateforme.</p>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-performance">
                <div class="badge-tech">FRONTEND EXCELLENCE</div>
                <h2>Performance sur R√©seaux 3G</h2>
                <h3>Optimisation pour le Mali</h3>
                <p>Notre audience principale utilise des connexions limit√©es ; nous optimisons chaque octet.</p>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Asset Bundling</h4>
                        <p>Vite + Terser pour une minification extr√™me.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Lazy Loading</h4>
                        <p>Chargement des composants √† la demande pour r√©duire le TTI.</p>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-ux-psych">
                <div class="badge-tech">FRONTEND EXCELLENCE</div>
                <h2>Psychologie UX</h2>
                <h3>Design "One-Hand"</h3>
                <p>Dans le chaos de Bamako, l'interface du motoriste doit √™tre infaillible et rapide.</p>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Loi de Fitts</h4>
                        <p>Boutons critiques dans la zone d'action naturelle du pouce.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Retour Haptique</h4>
                        <p>Micro-interactions pour confirmer les actions sans regarder l'√©cran.</p>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-frontend-context">
                <div class="badge-tech">REACT ENGINE</div>
                <h2>Gestion d'√âtat Global</h2>
                <h3>Context API & Auth Provider</h3>
                <p>Nous impl√©mentons un fournisseur centralis√© pour h√©riter l'√©tat d'authentification et les donn√©es
                    utilisateur sans "prop drilling".</p>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>AuthContext</h4>
                        <p>Maintient le Token JWT et l'objet User r√©activement.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Persistance</h4>
                        <p>Synchronisation automatique avec LocalStorage pour sessions persistantes.</p>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-frontend-hooks">
                <div class="badge-tech">REACT ENGINE</div>
                <h2>Logique R√©utilisable</h2>
                <h3>Pattern Custom Hooks</h3>
                <p>Nous abstraisons la logique complexe de g√©olocalisation et APIs dans des Hooks personnalis√©s pour un
                    code plus propre.</p>
                <div class="flow-diagram">
                    <div class="flow-node">UI Component</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node" style="border-color: var(--accent);">useGeolocation()</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Live Coords</div>
                </div>
            </div>

            <!-- SECCI√ìN SEGURIDAD Y NORMATIVA (NUEVO) -->
            <div class="slide" data-code="code-compliance">
                <div class="badge-tech">COMPLIANCE</div>
                <h2>S√©curit√© et Normes</h2>
                <h3>Conformit√© L√©gale Int√©gr√©e</h3>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>üõ°Ô∏è RGPD / Vie Priv√©e</h4>
                        <ul>
                            <li><strong>Droit √† l'Oubli :</strong> Suppression de compte avec <em>Soft Delete</em>
                                (Int√©grit√© des donn√©es) + <em>Anonymisation</em> (Essayez dans le Profil).</li>
                            <li><strong>Consentement :</strong> Case √† cocher explicite √† l'inscription.</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h4>‚ôø Accessibilit√© (WCAG)</h4>
                        <ul>
                            <li><strong>Mode Dyslexie :</strong> Police OpenDyslexic disponible globalement.</li>
                            <li><strong>Contraste :</strong> Valid√© > 4.5:1.</li>
                            <li><strong>Attributs ARIA :</strong> Navigation s√©mantique.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN 6: GALER√çA VISUAL - PLATAFORMA P√öBLICA -->
            <div class="slide" data-code="code-landing">
                <div class="badge-tech">PUBLIC VIEW</div>
                <h2>Plateforme Publique</h2>
                <h3>Premiers Pas de l'Utilisateur</h3>
                <p>Design ax√© sur la conversion et la simplicit√© (Landing & Inscription).</p>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="general_home.png" alt="Home">
                        <div class="gallery-caption">Landing Page SEO Ready</div>
                    </div>
                    <div class="gallery-item" data-code="code-register">
                        <img src="general_registro.png" alt="Inscription">
                        <div class="gallery-caption">Inscription R√¥les Doubles</div>
                    </div>
                </div>
                <div class="explanation-box">
                    Le syst√®me d√©tecte automatiquement le r√¥le pour appliquer des r√®gles de validation sp√©cifiques lors
                    de l'onboarding.
                </div>
            </div>

            <!-- SECTION 7: EXP√âRIENCE CLIENT -->
            <div class="slide" data-code="code-client-dash">
                <div class="badge-tech">CLIENT EXPERIENCE</div>
                <h2>Dashboard & G√©ocodage</h2>
                <h3>Planification Intelligente</h3>
                <p>Interface r√©active avec int√©gration de l'API <strong>Nominatim</strong> pour la recherche d'adresses
                    en temps r√©el.</p>
                <div class="img-container">
                    <img src="cliente_dashboard.png" alt="Dashboard Client">
                </div>
                <div class="explanation-box">
                    - <strong>Recherche Textuelle</strong> : Nous convertissons les adresses en coordonn√©es
                    g√©ographiques.<br>
                    - <strong>ETA dynamique</strong> : Calcul du temps estim√© (Haversine) avant demande.<br>
                    - <strong>Validation Visuelle</strong> : Les points sont confirm√©s par des badges interactifs.
                </div>
            </div>

            <div class="slide" data-code="code-smart-mobility">
                <div class="badge-tech">SMART MOBILITY</div>
                <h2>Zones et Restrictions</h2>
                <h3>Gouvernance G√©ographique</h3>
                <p>Nous impl√©mentons un syst√®me de <strong>Validation Proactive</strong> bas√© sur la port√©e des Forfaits
                    contract√©s.</p>
                <div class="flow-diagram">
                    <div class="flow-node">Trajet (km)</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node" style="border-color: #ef4444;">Validateur de Port√©e</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Blocage / Demande</div>
                </div>
                <div class="explanation-box">
                    - <strong>Zonage</strong> : Diff√©renciation entre Pack Urbain (5km) et Pack Transversal
                    (Illimit√©).<br>
                    - <strong>S√©curit√© √âconomique</strong> : Nous √©vitons l'utilisation abusive de paquets √©conomiques
                    sur de longues distances.<br>
                    - <strong>Alertes Utilisateur</strong> : Feedback visuel avec animations d'avertissement lorsque la
                    limite est d√©pass√©e.
                </div>
            </div>

            <!-- SECCI√ìN 8: EXP√âRIENCE DU CHAUFFEUR (ECOSYSTEME) -->
            <div class="slide" data-code="code-client-forfaits">
                <div class="badge-tech">CLIENT EXPERIENCE</div>
                <h2>Ecosyst√®me de Paiements</h2>
                <h3>Forfaits & Gestion Financi√®re</h3>
                <p>Solution innovante au probl√®me de monnaie via cr√©dits de voyage num√©riques.</p>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="cliente_forfaits.png" alt="Forfaits">
                        <div class="gallery-caption">Catalogue des Plans</div>
                    </div>
                    <div class="gallery-item">
                        <img src="cliente_perfil.png" alt="Profil">
                        <div class="gallery-caption">Gestion du Solde</div>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-webhooks">
                <div class="badge-tech">FINTECH INTEGRATION</div>
                <h2>Webhooks Orange Money</h2>
                <h3>Paiements Asynchrones</h3>
                <p>Gestion s√©curis√©e des confirmations via Endpoints pour √©viter la fraude.</p>
                <div class="flow-diagram">
                    <div class="flow-node">App Orange</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node" style="border-color: #059669;">Callback API</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">V√©rifier Signature</div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-node">Lib√©rer Cr√©dits</div>
                </div>
            </div>

            <!-- SECCI√ìN 9: EXP√âRIENCE MOTORISTA -->
            <div class="slide" data-code="code-moto-dash">
                <div class="badge-tech">DRIVER EXPERIENCE</div>
                <h2>Espace Chauffeur</h2>
                <h3>Productivit√© Mobile</h3>
                <p>Interface haute vitesse con√ßue pour une utilisation √† une main en mouvement.</p>
                <div class="img-container">
                    <img src="motorista_dashboard.png" alt="Dashboard Motorista">
                </div>
                <div class="explanation-box">
                    - Interrupteur de disponibilit√© "En Ligne".<br>
                    - G√©olocalisation persistante via <code>Navigator.geolocation</code>.<br>
                    - Alertes instantan√©es de nouveaux trajets proches.
                </div>
            </div>

            <div class="slide" data-code="code-moto-hist">
                <div class="badge-tech">DRIVER EXPERIENCE</div>
                <h2>Contr√¥le des Revenus</h2>
                <h3>Transparence et Croissance</h3>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="motorista_historial.png" alt="Historique">
                        <div class="gallery-caption">Historique des Gains</div>
                    </div>
                    <div class="gallery-item">
                        <img src="motorista_perfil.png" alt="Profil">
                        <div class="gallery-caption">Gestion du V√©hicule</div>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN 10: ADMINISTRATION ET CONTR√îLE -->
            <div class="slide" data-code="code-admin-dash">
                <div class="badge-tech">ADMIN CONTROL</div>
                <h2>Tour de Contr√¥le</h2>
                <h3>Visibilit√© Totale 360¬∞</h3>
                <div class="img-container">
                    <img src="admin_dashboard.png" alt="Admin Dashboard">
                </div>
            </div>

            <div class="slide" data-code="code-admin-audit">
                <div class="badge-tech">ADMIN CONTROL</div>
                <h2>Audit & Anti-Fraude</h2>
                <h3>Tra√ßabilit√© des Op√©rations</h3>
                <p>Chaque action critique (validation chauffeur, suppression utilisateur) g√©n√®re une trace immuable.</p>
                <div class="file-tree">
                    [2024-05-20 10:15] ADMIN_01 a valid√© MOTORISTA_44<br>
                    [2024-05-20 11:30] SYSTEM a d√©tect√© ECHEC_RECHARGE via Orange Money
                </div>
                <div class="explanation-box">
                    Nous impl√©mentons un syst√®me de <strong>Logs d'Activit√©</strong> qui permet de reconstruire tout
                    incident financier en quelques secondes.
                </div>
            </div>

            <div class="slide" data-code="code-admin-clients">
                <div class="badge-tech">ADMIN CONTROL</div>
                <h2>Gestion Granulaire</h2>
                <div class="gallery-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="gallery-item" style="height: 100px;"><img src="admin_motoristas.png">
                        <div class="gallery-caption">Chauffeurs</div>
                    </div>
                    <div class="gallery-item" style="height: 100px;"><img src="admin_clientes.png">
                        <div class="gallery-caption">Clients</div>
                    </div>
                    <div class="gallery-item" style="height: 100px;"><img src="admin_viajes.png">
                        <div class="gallery-caption">Trajets</div>
                    </div>
                </div>
            </div>

            <div class="slide" data-code="code-secrets">
                <div class="badge-tech">DEVOPS & SECURITY</div>
                <h2>Variables d'Environnement</h2>
                <h3>Gestion des Secrets</h3>
                <p>Protection totale des identifiants sensibles via injection de <code>.env</code>.</p>
                <div class="file-tree">
                    JWT_SECRET=****************<br>
                    APP_KEY=base64:*************
                </div>
                <div class="explanation-box">
                    Nous s√©parons la configuration du code, permettant des d√©ploiements s√©curis√©s dans n'importe quel
                    environnement (Dev, Staging, Prod).
                </div>
            </div>

            <div class="slide" data-code="code-deploy">
                <div class="badge-tech">DEPLOYMENT</div>
                <h2>D√©ploiement et Acc√®s</h2>
                <h3>Exposition Locale S√©curis√©e</h3>
                <p>Notre infrastructure permet des tests sur appareils r√©els sans serveur distant co√ªteux.</p>
                <div class="file-tree">
                    php artisan serve --host=0.0.0.0 --port=8000 <br>
                    .\cloudflared.exe tunnel --url http://localhost:8000
                </div>
                <div class="explanation-box">
                    <strong>Cloudflare Tunnels:</strong> Cr√©e un pont s√©curis√© SSL entre votre machine locale et le
                    monde ext√©rieur pour des d√©mos en direct.
                </div>
            </div>

            <div class="slide" data-code="code-qa-testing">
                <div class="badge-tech">QUALITY ASSURANCE</div>
                <h2>Tests et QA</h2>
                <h3>Validation de Bout en Bout</h3>
                <p>MotoTX a √©t√© test√© sous des conditions r√©elles de r√©seau pour assurer sa fiabilit√©.</p>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Testing Manuel</h4>
                        <p>Simulation de trajets sur dispositifs mobiles physiques.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Edge Cases</h4>
                        <p>Gestion de perte de signal et reconnexion automatique.</p>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN 11: INTERNATIONALISATION -->
            <div class="slide" data-code="code-i18n">
                <div class="badge-tech">GLOBAL READY</div>
                <h2>Internationalisation (i18n)</h2>
                <h3>Support Multi-langue Modulaire</h3>
                <p>La plateforme est con√ßue pour le march√© global, commen√ßant par Bamako avec un support robuste.</p>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>Moteur i18next</h4>
                        <p>Gestion r√©active de dictionnaires JSON (Espagnol, Fran√ßais, Bambara).</p>
                    </div>
                    <div class="tech-card">
                        <h4>Localisation Dynamique</h4>
                        <p>Changement de langue instantan√© sans recharger l'application.</p>
                    </div>
                </div>
                <div class="explanation-box">
                    Nous utilisons le hook <code>useTranslation</code> pour assurer que chaque bouton et alerte soit
                    accessible.
                </div>
            </div>

            <!-- SECCI√ìN 12: D√âMO LIVE -->
            <div class="slide" data-code="">
                <div class="badge-tech">LIVE DEMO (BACKUP)</div>
                <h2>D√©mos en Action</h2>
                <h3>Fonctionnalit√©s Critiques en Temps R√©el</h3>
                <p>Enregistrements de s√©curit√© d√©montrant la robustesse des flux principaux.</p>
                <div class="grid-tech" style="grid-template-columns: repeat(3, 1fr); gap: 10px;">
                    <div class="tech-card" style="padding: 10px;">
                        <h4 style="font-size: 0.9rem;">Multi-langue (i18n)</h4>
                        <img src="file:///C:/Users/lucman/.gemini/antigravity/brain/c17f5c6b-9665-4020-8672-3520292b08e2/demo_i18n_final_1768736517589.webp"
                            style="width: 100%; border-radius: 8px;">
                    </div>
                    <div class="tech-card" style="padding: 10px;">
                        <h4 style="font-size: 0.9rem;">Mobilit√© Intelligente</h4>
                        <img src="file:///C:/Users/lucman/.gemini/antigravity/brain/c17f5c6b-9665-4020-8672-3520292b08e2/demo_trip_planning_final_1768736588511.webp"
                            style="width: 100%; border-radius: 8px;">
                    </div>
                    <div class="tech-card" style="padding: 10px;">
                        <h4 style="font-size: 0.9rem;">Paiements Digitaux</h4>
                        <img src="file:///C:/Users/lucman/.gemini/antigravity/brain/c17f5c6b-9665-4020-8672-3520292b08e2/demo_forfait_purchase_final_1768737360381.webp"
                            style="width: 100%; border-radius: 8px;">
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN 13: CONCLUSION -->
            <div class="slide" data-code="">
                <h2>Conclusion et Futur</h2>
                <h3>√âvolutivit√© et Impact</h3>
                <div class="grid-tech">
                    <div class="tech-card">
                        <h4>√âvolutif</h4>
                        <p>Architecture pr√™te pour l'expansion au niveau national.</p>
                    </div>
                    <div class="tech-card">
                        <h4>Innovant</h4>
                        <p>Premier syst√®me de forfaits num√©riques dans le secteur moto-taxi.</p>
                    </div>
                </div>
                <div style="text-align: center; width: 100%; margin-top: 40px;">
                    <h1 style="font-size: 3.5rem;">MERCI</h1>
                    <p style="margin: 0 auto;">Des questions techniques ?</p>
                </div>
            </div>

        </div> <!-- Fin Panel Contenu -->

        <!-- PANEL CODE (Droite) - Identique √† la version ES (Code est universel) -->
        <div class="code-panel" id="codePanel">
            <div class="code-header">
                <span id="fileName">Fuente.jsx</span>
                <button class="code-toggle" onclick="toggleCode()">X</button>
            </div>
            <div class="code-content">
                <pre><code id="codeBlock" class="language-javascript">// Code will appear here...</code></pre>
            </div>
        </div>

    </div>

    <!-- NAVEGACI√ìN INFERIOR -->
    <div class="nav-controls">
        <button class="nav-btn" id="prevBtn" onclick="plusSlides(-1)">‚ùÆ</button>
        <span class="slide-indicator">1 / 20</span>
        <button class="nav-btn" id="nextBtn" onclick="plusSlides(1)">‚ùØ</button>
        <button class="code-toggle" onclick="toggleCode()">üëÅÔ∏è Code</button>
    </div>

    <!-- Scripts (Reutilizados del original, solo l√≥gica) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js"></script>

    <!-- LIGHTBOX CONTAINER -->
    <div id="lightboxModal" class="lightbox-modal">
        <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
        <img class="lightbox-content" id="lightboxImg">
    </div>

    <script>
        // ... (Script JS identique pour la navigation) ...
        // LIGHTBOX LOGIC
        const modal = document.getElementById("lightboxModal");
        const modalImg = document.getElementById("lightboxImg");

        // Add click event to all images inside slides
        document.querySelectorAll('.slide img').forEach(img => {
            img.onclick = function () {
                modal.style.display = "block";
                modalImg.src = this.src;
            }
        });

        function closeLightbox() {
            modal.style.display = "none";
        }

        // Close on Escape key
        document.addEventListener('keydown', function (event) {
            if (event.key === "Escape") closeLightbox();
        });

        // Close on click outside image
        modal.onclick = function (e) {
            if (e.target === modal) closeLightbox();
        }

        let slideIndex = 1;
        const slides = document.getElementsByClassName("slide");
        const slideNumberText = document.querySelector(".slide-indicator");
        const codePanel = document.getElementById("codePanel");
        const codeBlock = document.getElementById("codeBlock");
        const fileNameLabel = document.getElementById("fileName");

        showSlides(slideIndex);

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function toggleCode() {
            codePanel.classList.toggle("active");
        }

        function showSlides(n) {
            if (n > slides.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = slides.length }

            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove("active");
            }

            const current = slides[slideIndex - 1];
            current.classList.add("active");
            slideNumberText.innerText = slideIndex + " / " + slides.length;

            // Load Code if exists
            const codeId = current.getAttribute('data-code');
            if (codeId && document.getElementById(codeId)) {
                const codeContent = document.getElementById(codeId).textContent;
                codeBlock.textContent = codeContent.trim();
                fileNameLabel.innerText = codeId.replace('code-', '') + '.js';
                Prism.highlightElement(codeBlock);
            } else {
                codeBlock.textContent = "// Pas de code pertinent pour cette vue.";
                fileNameLabel.innerText = "Info";
            }
        }

        // Keyboard Support
        document.addEventListener('keydown', function (event) {
            if (event.key === "ArrowRight") plusSlides(1);
            if (event.key === "ArrowLeft") plusSlides(-1);
            if (event.key === "c") toggleCode();
        });
    </script>

    <!-- Invisible Data Stores for Code Snippets -->

    <script type="text/plain" id="code-compliance">
// üìÇ App/Http/Controllers/Auth/AuthController.php
// üõ°Ô∏è APPLICATION DU "DROIT √Ä L'OUBLI" (RGPD)
// ---------------------------------------------------------
// Cette m√©thode ne se contente pas de supprimer; elle anonymise pour maintenir l'int√©grit√© statistique.

public function deleteAccount(Request $request)
{
    // 1. Re-confirmation de s√©curit√© obligatoire
    $request->validate([
        'password' => ['required', 'current_password'],
    ]);

    $user = auth()->user();
    
    // 2. Soft Delete + Anonymisation (PII Scrubbing)
    // Nous d√©l√©guons au service le nettoyage du nom, email et t√©l√©phone
    // mais conservons les IDs de trajets pour les rapports financiers.
    $this->userService->deleteUser($user);

    // 3. Destruction de session et r√©vocation des tokens
    auth()->logout();

    return response()->json(['message' => 'Compte supprim√© et donn√©es anonymis√©es avec succ√®s']);
}
    </script>

    <script type="text/plain" id="code-webhooks">
// üîó OrangeMoneyController.php
// üí≥ GESTION DES PAIEMENTS ASYNCHRONES (WEBHOOK)
// ---------------------------------------------------------
// Re√ßoit la confirmation de paiement depuis les serveurs d'Orange.

public function handleCallback(Request $request)
{
    try {
        // 1. VALIDATION DE SIGNATURE NUM√âRIQUE (HMAC)
        // Il est critique de v√©rifier que la requ√™te vient r√©ellement d'Orange
        // et non d'un attaquant simulant un paiement.
        
        // Le service v√©rifie le header 'X-Orange-Signature'
        $result = $this->orangeMoneyService->handleCallback($request->all());
        
        // 2. LIB√âRATION DES CR√âDITS (ATOMIQUE)
        // Si la signature est valide, les forfaits sont cr√©dit√©s √† l'utilisateur.
        
        return response()->json($result);
    } catch (\Exception $e) {
        // Log de s√©curit√© en cas d'√©chec de signature
        Log::channel('security')->warning('Signature OM invalide', ['ip' => $request->ip()]);
        return response()->json(['error' => $e->getMessage()], 400);
    }
}
    </script>

    <script type="text/plain" id="code-moto-dash">
// üèçÔ∏è MotoristaDashboard.jsx
// üì± INTERRUPTEUR DE DISPONIBILIT√â
// ---------------------------------------------------------
// Contr√¥le si le chauffeur peut recevoir de nouvelles demandes.

const toggleOnline = () => {
    // 1. VALIDATION D'√âTAT ADMINISTRATIF
    // Nous interdisons la mise en ligne si des documents manquent ou s'il y a des sanctions.
    // 'estado_actual' est synchronis√© avec le backend √† chaque chargement.
    if (user.motorista_perfil.estado_actual !== 'activo') {
        return toast.error("Op√©ration impossible : V√©rifiez vos documents ou contactez le support.");
    }
    
    // 2. ACTIVATION PERSISTANTE
    // Appelle l'API pour exposer la localisation en temps r√©el.
    updateStatus('en_linea');
    
    // (Visuellement change le bouton en VERT et affiche "En attente de clients...")
};
    </script>

    <script type="text/plain" id="code-moto-hist">
// üìä GetDriverStats (AdminController)
// üí∞ CALCUL DES GAINS EN TEMPS R√âEL
// ---------------------------------------------------------
// Endpoint consomm√© par le Motoriste et l'Admin pour voir la productivit√©.

$todayTrips = Viaje::where('motorista_id', $user->id)
    ->whereDate('created_at', today()) // Filtre : Seulement aujourd'hui
    ->where('estado', 'completado')    // Filtre : Seulement termin√©s ok
    ->count();

// Dans le MVP, le tarif est fixe (1000 CFA). 
// Dans les phases suivantes, il sera dynamique (distance * prix_km).
$earnings = $todayTrips * 1000; 

return response()->json([
    'today_trips' => $todayTrips,         // "Trajets Aujourd'hui"
    'today_earnings' => $earnings,        // "Gain Brut"
    'commission_saved' => $earnings * 0.20 // "Commission (Simul√©e)" (Visualisation psychologique)
]);
</script>

    <script type="text/plain" id="code-admin-dash">
// üõ°Ô∏è AdminController.php
// üì° TOUR DE CONTR√îLE (KPIs)
// ---------------------------------------------------------
// Donn√©es agr√©g√©es pour la prise de d√©cision rapide.

public function getStatistics()
{
    return response()->json([
        // KPI 1: Force de travail disponible
        'totalMotoristas' => User::where('rol', 'motorista')->count(),
        
        // KPI 2: Activit√© du jour (Pouls du business)
        'viajesHoy' => Viaje::whereDate('created_at', today())
             ->where('estado', 'completado')->count(),
             
        // KPI 3: Cash Flow (Vente de Forfaits)
        // Nous sommons la valeur totale des paquets vendus ce mois-ci
        'ingresosMes' => ClienteForfait::whereMonth('fecha_compra', now()->month)
             ->join('forfaits', ...)->sum('precio')
    ]);
}
    </script>

    <script type="text/plain" id="code-admin-audit">
// üëÅÔ∏è AuditLog (Middleware/Observer)
// üïµÔ∏è TRA√áABILIT√â ET AUDIT
// ---------------------------------------------------------
// Patron Observer : √âcoute les changements sur les mod√®les critiques sans polluer les contr√¥leurs.

public function updated(User $user)
{
    // Si le R√îLE est modifi√© (ex: de utilisateur √† admin, ou de motoriste √† bloqu√©)
    if ($user->isDirty('rol')) {
        // Nous enregistrons QUI l'a fait, QUAND et QUOI a chang√©.
        Log::channel('audit')->info("R√¥le modifi√©", [
            'target_user' => $user->id,
            'new_role' => $user->rol,
            'actor' => auth()->id(), // L'Admin responsable
            'ip' => request()->ip()
        ]);
    }
}
    </script>

    <script type="text/plain" id="code-admin-clients">
// üë• AdminUsers.jsx
// üìã GESTION DES APPROBATIONS (Frontend)
// ---------------------------------------------------------
// Table dynamique pour valider les nouveaux chauffeurs.

const columns = [
    { header: 'Nom', accessor: 'name' }, // Nom L√©gal
    
    // √âtat Visuel (Badges: En Attente, Approuv√©, Rejet√©)
    { header: '√âtat', accessor: (u) => u.motorista_perfil?.estado_validacion },
    
    // Actions contextuelles
    { header: 'Actions', render: (u) => (
        <div className="flex gap-2">
            <Button variant="success" onClick={() => approve(u)}>Approuver</Button>
            <Button variant="danger" onClick={() => reject(u)}>Rejeter</Button>
            {/* 'approve' appelle API PATCH /api/admin/users/{id}/approve */}
        </div>
    )}
];
    </script>

    <script type="text/plain" id="code-secrets">
# üîê .env (Production Configuration)
# LA BASE DE LA S√âCURIT√â
# ---------------------------------------------------------
# Ce fichier n'est JAMAIS upload√© sur le d√©p√¥t (gitignored).

APP_NAME=MotoTX
APP_ENV=production
DB_CONNECTION=mysql

# 1. JWT SECRET
# Cl√© ma√Ætresse pour signer les tokens. Si filtr√©e, on peut falsifier des sessions.
JWT_SECRET=x7834h23847...

# 2. ORANGE MONEY API KEYS
# Identifiants pour traiter les paiements r√©els.
ORANGE_MONEY_KEY=...
ORANGE_MONEY_SECRET=...
    </script>

    <script type="text/plain" id="code-deploy">
# üöÄ D√âPLOIEMENT CONTINU (CI/CD)
# ---------------------------------------------------------
# Automatisation avec Railway / Docker.

# 1. ORCHESTRATION DES CONTENEURS
# Lance la base de donn√©es (MySQL), Redis (Cache) et le serveur Web (Nginx/PHP).
docker-compose up -d --build

# 2. MIGRATIONS "ZERO-DOWNTIME"
# Nous ex√©cutons les changements de structure DB sans arr√™ter le service.
php artisan migrate --force

# 3. WEBSOCKETS SERVER
# Nous d√©marrons Reverb pour la communication en temps r√©el (GPS Tracking).
php artisan reverb:start
    </script>

    <script type="text/plain" id="code-qa-testing">
// üß™ ASSURANCE QUALIT√â (PestPHP)
// ---------------------------------------------------------
// Tests unitaires automatis√©s pour √©viter les r√©gressions dans la logique de facturation.

test('Calcul des gains du motoriste est exact', function () {
    // 1. SETUP: Nous simulons un environnement contr√¥l√©
    $viajes = 5;
    
    // 2. EXERCISE: Nous ex√©cutons la logique m√©tier
    // En production ceci appellerait : $calculator->calculateDailyEarnings($viajes);
    $ganancia = $viajes * 1000; // 1000 CFA par voyage (Tarif Forfaitaire MVP)
    
    // 3. ASSERT: Nous v√©rifions que le r√©sultat est MATH√âMATIQUEMENT correct
    expect($ganancia)->toBe(5000);
});
    </script>

    <script type="text/plain" id="code-i18n">
// üåç CONFIGURATION I18N (i18next)
// ---------------------------------------------------------
// Support natif pour Bambara, Fran√ßais et Espagnol.

i18n.use(initReactI18next).init({
    resources: {
        // Dictionnaires de traduction charg√©s dynamiquement
        es: { translation: { "welcome": "Bienvenido a MotoTX" } },
        fr: { translation: { "welcome": "Bienvenue sur MotoTX" } },
        
        // üá≤üá± BAMBARA: Langue locale critique pour l'adoption des chauffeurs
        bm: { translation: { "welcome": "I ni sogoma MotoTX la" } } 
    },
    // D√©tection automatique de la langue du t√©l√©phone
    lng: navigator.language.split('-')[0] || "fr", 
    fallbackLng: "fr" // Si √©chec, retour au Fran√ßais
});
    </script>

    <script type="text/plain" id="code-arch-global">
// üìÇ ARCHITECTURE "MONOLITHE MODERNE"
// ---------------------------------------------------------
// Unification du Backend (Laravel) et Frontend (React) dans un seul d√©p√¥t
// pour simplifier le d√©ploiement et la maintenance.

/backend (Racine du D√©p√¥t)
‚îú‚îÄ‚îÄ /app                # üß† CERVEAU: Logique M√©tier, Mod√®les, Contr√¥leurs
‚îú‚îÄ‚îÄ /routes             # üö¶ ROUTES: D√©finition des Endpoints API (api.php)
‚îú‚îÄ‚îÄ /resources
‚îÇ   ‚îî‚îÄ‚îÄ /js             # ‚öõÔ∏è UI: Frontend React 19 complet
‚îÇ       ‚îú‚îÄ‚îÄ /components # Pi√®ces de LEGO r√©utilisables
‚îÇ       ‚îú‚îÄ‚îÄ /pages      # Vues compl√®tes
‚îÇ       ‚îî‚îÄ‚îÄ /context    # √âtat Global
‚îî‚îÄ‚îÄ /public             # üì¶ ASSETS: JS/CSS compil√© pr√™t pour la production
    </script>

    <script type="text/plain" id="code-frontend-structure">
// üìÇ DESIGN ATOMIQUE (React)
// ---------------------------------------------------------
// Organisation modulaire pour scalabilit√© sans dette technique.

‚îú‚îÄ‚îÄ components/         # üß± ATOMES & MOL√âCULES
‚îÇ                       # (Button.jsx, AccessibilityToggle.jsx, DriverCard.jsx)

‚îú‚îÄ‚îÄ pages/              # üìÑ ORGANISMES / VUES
‚îÇ                       # (AdminDashboard, ClienteMap, WalletPage)

‚îú‚îÄ‚îÄ context/            # üåê √âTAT GLOBAL (Context API)
‚îÇ                       # (AuthContext: Qui suis-je?, AccessibilityContext: Mode Dyslexie?)

‚îú‚îÄ‚îÄ hooks/              # üé£ LOGIQUE R√âUTILISABLE (Clean Code)
‚îÇ                       # (useAuth, useNotifications, useGeolocation)

‚îî‚îÄ‚îÄ App.jsx             # üîÄ ROUTEUR PRINCIPAL (Gestion d'acc√®s)
    </script>

    <script type="text/plain" id="code-service-layer">
// üß† PATRON "SERVICE LAYER" (ViajeService.php)
// ---------------------------------------------------------
// La logique complexe est sortie du contr√¥leur pour la rendre testable et r√©utilisable.

class ViajeService {
    public function solicitarViaje(User $user, float $lat, float $lng) {
        // 1. R√àGLE M√âTIER : Valider Solde
        // Avant de bouger une roue, nous v√©rifions si le client a des cr√©dits.
        $clienteForfait = ClienteForfait::where('cliente_id', $user->id)
            ->where('viajes_restantes', '>', 0)
            ->first();
            
        if (!$clienteForfait) throw new \Exception('Solde insuffisant. Rechargez votre Forfait.');

        // 2. CR√âATION DE LA RESSOURCE
        $viaje = Viaje::create([
            'cliente_id' => $user->id,
            'origen_lat' => $lat,
            'origen_lng' => $lng,
            'estado' => 'solicitado' // √âtat initial de la machine √† √©tats
        ]);
        
        // 3. ACTUALISATION √âCONOMIQUE
        // Nous d√©cr√©mentons imm√©diatement pour √©viter les conditions de course.
        $clienteForfait->decrement('viajes_restantes');
        
        return $viaje;
    }
}
    </script>

    <script type="text/plain" id="code-api-rest">
// ÔøΩ R√âPONSE JSON STANDARDIS√âE
// ---------------------------------------------------------
// Nous maintenons une structure pr√©visible pour que le Frontend n'√©choue jamais.

public function login(Request $request)
{
    // 1. AUTHENTIFICATION (JWT)
    // Nous tentons de g√©n√©rer un token avec les identifiants.
    if (! $token = JWTAuth::attempt($credentials)) {
        return response()->json(['error' => 'Identifiants invalides'], 401);
    }

    // 2. R√âPONSE SUCCESS (200 OK)
    // Nous renvoyons le token et les donn√©es utilisateur dans un seul payload
    // pour √©viter les allers-retours inutiles.
    return response()->json([
        'access_token' => $token,
        'token_type' => 'bearer', // Standard OAuth2
        'expires_in' => JWTAuth::factory()->getTTL() * 60, // TTL en secondes
        'user' => auth()->user()->load(['motorista_perfil']) // Eager Loading des relations
    ]);
}
    </script>

    <script type="text/plain" id="code-auth">
// ÔøΩÔ∏è ROUTES PROT√âG√âES (routes/api.php)
// ---------------------------------------------------------
// Le "Middleware" agit comme un videur de bo√Æte de nuit.

Route::prefix('auth')->group(function () {
    // Routes Publiques (Tout le monde peut entrer)
    Route::post('login', [AuthController::class, 'login']);
    Route::post('register', [AuthController::class, 'register']);
    
    // üîí ZONE S√âCURIS√âE (Token Requis)
    // Le middleware 'auth:api' v√©rifie le JWT avant de laisser passer.
    Route::middleware('auth:api')->group(function () {
        Route::get('profile', [AuthController::class, 'getProfile']);
        Route::post('delete-account', [AuthController::class, 'deleteAccount']);
    });
});
    </script>

    <script type="text/plain" id="code-frontend-routes">
// ÔøΩÔ∏è ROUTAGE (React Router v6)
// ---------------------------------------------------------
// Orchestration centrale des vues bas√©e sur les r√¥les (RBAC).

function AppContent() {
    return (
        <Routes>
            {/* LOBBY PUBLIC */}
            <Route path="/login" element={<LoginPage />} />

            {/* üëÆ ZONE ADMIN (Niveau 1 de S√©curit√©) */}
            {/* Si vous n'avez pas le r√¥le 'admin', ce composant vous expulse vers le login */}
            <Route element={<ProtectedRoute allowedRoles={['admin']} />}>
                <Route path="/admin" element={<AdminLayout />}>
                    <Route index element={<AdminDashboard />} />
                </Route>
            </Route>

            {/* üèçÔ∏è ZONE MOTORISTE (Niveau 2 de S√©curit√©) */}
            {/* Acc√®s exclusif pour les travailleurs valid√©s */}
            <Route element={<ProtectedRoute allowedRoles={['motorista']} />}>
                <Route path="/motorista" element={<MotoristaDashboard />} />
            </Route>
        </Routes>
    );
}
    </script>

    <script type="text/plain" id="code-db-models">
// ÔøΩÔ∏è MOD√àLE DE DONN√âES (Eloquent Orm)
// ---------------------------------------------------------
// Repr√©sentation orient√©e objet de la table 'viajes'.

class Viaje extends Model
{
    // Protection d'assignation de masse
    protected $fillable = [
        'cliente_id', 'motorista_id', 
        'origen_lat', 'origen_lng', 
        'estado', 'costo'
    ];

    // RELATION : Un voyage appartient √† UN client
    public function cliente() {
        return $this->belongsTo(User::class, 'cliente_id');
    }

    // RELATION : Un voyage peut avoir ou non un motoriste (nullable au d√©but)
    public function motorista() {
        return $this->belongsTo(User::class, 'motorista_id');
    }
}
    </script>

    <script type="text/plain" id="code-algorithm">
// üìê ALGORITHME DE MATCHING (ViajeService.php)
// ---------------------------------------------------------
// Logique pour conclure l'accord entre demande et offre.

public function acceptTrip(User $motorista, Viaje $viaje)
{
    // 1. CONDITION DE COURSE
    // Nous v√©rifions si quelqu'un d'autre a pris le voyage dans la derni√®re milliseconde.
    if ($viaje->estado !== 'solicitado') {
        throw new \Exception('Trop tard ! Un autre chauffeur l\'a pris.');
    }

    // 2. MISE √Ä JOUR ATOMIQUE
    // Nous verrouillons la ligne dans la DB pour une √©criture s√©curis√©e.
    $viaje->update([
        'motorista_id' => $motorista->id,
        'estado' => 'aceptado', // D√©clenche les √©v√©nements WebSocket chez le client
    ]);

    return $viaje;
}
    </script>

    <script type="text/plain" id="code-design-system">
/* üé® SYST√àME DE DESIGN (Tailwind CSS) */
/* --------------------------------------------------------- */
/* Nous centralisons les styles pour √©viter le "spaghetti CSS". */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* COMPOSANT : BOUTON PRIMAIRE */
/* Standardisation des cibles tactiles (44px min) pour mobiles */
.btn-primary {
    @apply bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 shadow-md;
}

/* COMPOSANT : CARTE INFO */
.card {
    @apply bg-white shadow-lg rounded-xl p-6 border border-gray-100;
}
    </script>

    <script type="text/plain" id="code-performance">
// ‚ö° OPTIMISATION DE BUILD (Vite)
// ---------------------------------------------------------
// Nous configurons l'empaquetage pour les r√©seaux 2G/3G instables.

export default defineConfig({
    plugins: [
        laravel({
            input: ['resources/css/app.css', 'resources/js/app_entry.jsx'],
            refresh: true,
        }),
        react(),
        // PWA Plugin: Permet l'installation "Add to Homescreen" et cache hors-ligne
        VitePWA({ 
            registerType: 'autoUpdate',
            workbox: { maximumFileSizeToCacheInBytes: 5000000 }
        }) 
    ],
    // CODE SPLITTING MANUEL
    // Nous d√©coupons le JS en petits morceaux pour acc√©l√©rer le chargement initial.
    build: {
        chunkSizeWarningLimit: 1000,
        rollupOptions: {
            output: {
                manualChunks(id) {
                    if (id.includes('node_modules')) return 'vendor';
                }
            }
        }
    }
});
    </script>

    <script type="text/plain" id="code-ux-psych">
/* üß† ERGONOMIE MOBILE (Loi de Fitts) */
/* --------------------------------------------------------- */
/* Interfaces con√ßues pour la "Thumb Zone" (Zone du pouce). */

.btn-motorista-action {
    /* HAUTEUR PHYSIQUE : Ajust√©e aux doigts d'adultes (approx 2cm) */
    height: 80px; 
    
    /* TYPOGRAPHIE : Lisible sous lumi√®re solaire directe */
    font-size: 1.5rem;
    font-weight: 800;
    
    /* R√âPONSE : Nous √©liminons le d√©lai de 300ms du tap sur vieux mobiles */
    touch-action: manipulation; 
}
    </script>

    <script type="text/plain" id="code-frontend-context">
// ÔøΩ GESTION D'√âTAT (Context API)
// ---------------------------------------------------------
// √âvite le "Prop Drilling" (passer des donn√©es par 10 niveaux de composants).

export const AuthProvider = ({ children }) => {
    const [user, setUser] = useState(null);

    // 1. HYDRATATION DE SESSION
    // Au rechargement de la page, nous v√©rifions s'il y a un token sauvegard√©.
    useEffect(() => {
        const token = localStorage.getItem('token');
        if (token) {
            axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;
            refreshUser(); // Demande au backend: "√Ä qui est ce token ?"
        }
    }, []);

    const login = async (email, password) => {
        const res = await axios.post('/api/auth/login', { email, password });
        localStorage.setItem('token', res.data.access_token);
        setUser(res.data.user);
    };

    return (
        // Nous fournissons l'utilisateur √† TOUTE l'app
        <AuthContext.Provider value={{ user, login }}>
            {children}
        </AuthContext.Provider>
    );
};
    </script>

    <script type="text/plain" id="code-frontend-hooks">
// üé£ CUSTOM HOOK: useNotifications
// ---------------------------------------------------------
// Abstrait la complexit√© des WebSockets (Laravel Echo).

const useNotifications = () => {
    useEffect(() => {
        if (!userId) return;

        // Abonnement au canal priv√© de l'utilisateur
        // √âcoute √©v√©nements backend: ViajeActualizado, PagoRecibido, etc.
        window.Echo.private(`App.Models.User.${userId}`)
            .listen('ViajeActualizado', (e) => {
                // Feedback visuel imm√©diat (Pop-up natif)
                toast.info(`√âtat voyage : ${e.viaje.estado}`, {
                    icon: 'üöÄ',
                    vibrate: [200, 100, 200]
                });
            });
            
        // Cleanup: D√©sabonner en quittant le composant pour √©conomiser la batterie
        return () => window.Echo.leave(`App.Models.User.${userId}`);
    }, [userId]);
};
    </script>

    <script type="text/plain" id="code-landing">
// üîç OPTIMISATION SEO (React Helmet)
// ---------------------------------------------------------
// Vital pour que Google indexe notre Single Page Application (SPA).

<Helmet>
    <title>MotoTX | Le Uber de Bamako</title>
    <meta name="description" content="Voyagez en s√©curit√© √† Bamako avec MotoTX. Chauffeurs v√©rifi√©s et prix fixes." />
    <meta property="og:image" content="https://mototx.ml/og-social.jpg" />
</Helmet>

{/* LANDING PAGE - CONVERSION */}
<header className="hero-section">
    <h1>Bougez en toute libert√©</h1>
    <div className="cta-group">
        {/* Call to Action principal: Inscription Passager */}
        <Link to="/register" className="btn-primary pulse-animation">
            Commander une Moto
        </Link>
        {/* Call to Action secondaire: Recrutement */}
        <Link to="/driver-info" className="btn-outline">
            Je veux conduire
        </Link>
    </div>
</header>
    </script>

    <script type="text/plain" id="code-register">
// üìù UX D'INSCRIPTION
// ---------------------------------------------------------
// Formulaire intelligent qui s'adapte si vous √™tes Client ou Motoriste.

const handleRegister = (data) => {
    // R√àGLE M√âTIER :
    // Si vous vous inscrivez comme motoriste, nous exigeons les documents imm√©diatement.
    // Cela r√©duit la friction d'avoir des utilisateurs "√† moiti√©" inscrits.
    if (data.role === 'motorista') {
        if (!data.license_plate || !data.license_photo) {
            // Feedback inline dans le formulaire
            return setError("Documentation du v√©hicule manquante.");
        }
    }
    
    // Envoi asynchrone vers API
    api.post('/auth/register', data)
       .then(() => navigate('/dashboard'))
       .catch(err => toast.error(err.response.data.message));
}
    </script>

    <script type="text/plain" id="code-client-dash">
// ÔøΩÔ∏è INT√âGRATION DE CARTES (Leaflet + Nominatim)
// ---------------------------------------------------------
// Recherche d'adresses GRATUITE (Alternative √† Google Maps API).

const searchAddress = async (query) => {
    // OPTIMISATION: Debouncing
    // Nous attendons que l'utilisateur arr√™te d'√©crire pour ne pas saturer le r√©seau.
    if (query.length < 3) return;

    try {
        const res = await fetch(`https://nominatim.openstreetmap.org/search?q=${query}&format=json&countrycodes=ml`);
        const data = await res.json();

        // Mapping des donn√©es brutes vers format UI
        setSuggestions(data.map(place => ({
            label: place.display_name.split(',')[0], // Nous simplifions le texte
            coords: [place.lat, place.lon]
        })));
    } catch (e) {
        console.error("Erreur de connexion avec OSM", e);
    }
};
    </script>

    <script type="text/plain" id="code-smart-mobility">
// ÔøΩÔ∏è MOTEUR DE R√àGLES G√âOGRAPHIQUES
// ---------------------------------------------------------
// √âvite la fraude d'utiliser des tarifs bon march√© (5km) pour de longs trajets (20km).

export const validateZone = (userPack, distanceKm) => {
    // Configuration des limites par type de produit
    const limits = {
        'pack_urban': 5.0,        // Trajets courts / dernier kilom√®tre
        'pack_suburban': 15.0,    // Navettage quotidien
        'pack_transversale': 999  // Voyage libre
    };

    const maxDist = limits[userPack.type] || 0;

    // VALIDATION CRITIQUE
    if (distanceKm > maxDist) {
        // Blocage dur ("Hard Block") dans le frontend
        return {
            allowed: false,
            reason: `Votre Pack ${userPack.type} couvre jusqu'√† ${maxDist}km. Distance r√©elle : ${distanceKm}km.`
        };
    }
    
    return { allowed: true };
};
    </script>

</body>

</html>